<%- include("layout/header") %>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    .cursor-pointer{
        cursor: pointer;
    }
    .border{
        width: 80%;
    }
    #chat-container{
        background-color: lightblue;
        width: 100%;
        height: 400px;
        overflow: scroll;
    }
    .chat-section{
        display: none;
    }
</style>
<body>
    <h2 class="mb-4"> Hii, <%= user.name %></h2>

    <div class="row">
        <div class="col-md-3">
            <ul class="list-group">
                <%
                    if(users.length>0){
                        for(let i=0; i<users.length; i++){
                            %>
                            <li class="list-group-item list-group-item-dark cursor-pointer user-list">
                                <img src="<%= users[i]['image']%>" alt="" width="100px" height="100px">

                                <%= users[i]["name"] %>

                            </li>
                            <%
                        }
                    }
                %>
            </ul>
        </div>
        <div class="col-md-9">

            <h3 class="start-head">Click to Start Chat</h3>
            <div class="chat-section">
                <div id="chat-container">

                </div>

                <form action="" id="chat-form">
                    <input type="text" name="message" placeholder="Enter Message" class="border" id="message" required>
                    <input type="submit" value="Send Message" class="btn btn-primary">
                </form>
            </div>

        </div>
    </div>
</body>
</html>

<script>

let socket= io("/user-namespace")

    $(document).ready(function(){
        $(".user-list").click(function(){
            $(".start-head").hide()
            $(".chat-section").show()

        })
    })
</script>

<%- include("layout/footer") %> 